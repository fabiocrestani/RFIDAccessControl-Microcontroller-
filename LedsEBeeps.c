#include <REGx51.h>	
#include "LedsEBeeps.h"

/// \file LedsEBeeps.c Rotinas de acionamento de Leds da placa e um buzzer externo.
/// Autor: Fábio Crestani<br>
/// Última modificação: 26/01/2015<br>

/////////////////////////////////////////////////////////////////////////////////
/// AcendeLedVermelho.
/// Propósito: Acende o led vermelho da placa P51 na porta P1_4<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////
void AcendeLedVermelho(){
	P1_4 = 1;
}

/////////////////////////////////////////////////////////////////////////////////
/// ApagaLedVermelho.
/// Propósito: Apaga o led vermelho da placa P51 na porta P1_4<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////
void ApagaLedVermelho(){
	P1_4 = 0;
}

/////////////////////////////////////////////////////////////////////////////////
/// AcendeLedVerde.
/// Propósito: Acende o led verde da placa P51 na porta P3_6<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////
void AcendeLedVerde(){
	P3_6 = 0;
}

/////////////////////////////////////////////////////////////////////////////////
/// ApagaLedVerde.
/// Propósito: Apaga o led verde da placa P51 na porta P3_6<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////
void ApagaLedVerde(){
	P3_6 = 1;
}

/////////////////////////////////////////////////////////////////////////////////
/// BeepRepetido.
/// Propósito: Aciona o buzzer <i>repeticoes</i> vezes e cada beep tem duracao
/// correspondente a <i>duracao</i>.<br>
/// Entradas: unsigned int repeticoes, unsigned int duracao<br>
/// Saídas: Nenhuma<br>
///
/// \param [in] repeticoes vezes para acionar o beep.
/// \param [in] duracao duração de cada beep. Obs: um valor baixo de duração torna
/// o beep inaudível.
/////////////////////////////////////////////////////////////////////////////////
void BeepRepetido(unsigned int repeticoes, unsigned int duracao){
	unsigned int i, j, k;

	for(i=0;i<repeticoes;i++){
		BUZZER = 1;
		for(j=0;j<duracao;j++) for(k=0;k<255;k++);		// Delay
		BUZZER = 0;
		for(j=0;j<duracao;j++) for(k=0;k<255;k++);	    // Delay
	}
}

/////////////////////////////////////////////////////////////////////////////////
/// LigaBeep.
/// Propósito: Aciona a porta do buzzer (alto).<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////
void LigaBeep(){
	BUZZER = 1;
}

/////////////////////////////////////////////////////////////////////////////////
/// DesligaBeep.
/// Propósito: Desaciona a porta do buzzer (baixo).<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////	
void DesligaBeep(){
	BUZZER = 0;
}

/////////////////////////////////////////////////////////////////////////////////
/// LigaRele.
/// Propósito: Aciona a porta do relé (alto).<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////
void LigaRele(){
	RELE = 1;
}
 /////////////////////////////////////////////////////////////////////////////////
/// DesligaRele.
/// Propósito: Desaciona a porta do relé (baixo).<br>
/// Entradas: Nenhuma<br>
/// Saídas: Nenhuma<br>
///
/////////////////////////////////////////////////////////////////////////////////	
void DesligaRele(){
	RELE = 0;
}